<div class="pb-2 grid grid-cols-2 md:grid-cols-4 grid-flow-row-dense gap-2"
     hx-target="#main"
     hx-trigger="account from:body, asset from:body, valuation from:body, budget from:body"
     hx-get="{{ url_for('budgeting.page') }}"
     hx-include="#budgeting-sidebar-uri">
    <h1 class="text-3xl font-serif text-primary mr-auto">Budgeting</h1>
    <div id="budgeting-status" class="mx-auto w-md max-w-full col-span-2">{% include "budgeting/status.jinja" %}</div>
    <div class="flex items-center justify-end h-9">
        <button class="btn-text btn-sq"
                hx-get="{{ url_for('budgeting.page', month=ctx.month_prev) }}"
                hx-push-url="true"
                hx-swap="innerHTML show:window:top">
            <icon>chevron_left</icon>
        </button>
        <h1 class="text-3xl font-serif text-primary">{{ ctx.month }}</h1>
        <button class="btn-text btn-sq"
                hx-get="{{ url_for('budgeting.page', month=ctx.month_next) }}"
                hx-push-url="true"
                hx-swap="innerHTML show:window:top"
                {% if not ctx.month_next %}disabled{% endif %}>
            <icon>chevron_right</icon>
        </button>
    </div>
</div>
<details class="max-w-2xl mx-auto mb-2 bg-surface-container-high rounded-md">
    <summary class="p-2 flex gap-2 items-center rounded-md bg-tertiary-container">
        <icon>help</icon>
        <span class="mr-auto">About budgeting in nummus</span>
        <icon class="details-icon-open">keyboard_arrow_up</icon>
        <icon class="details-icon-closed">keyboard_arrow_down</icon>
    </summary>
    <div class="prose px-2 mx-auto">
        <p>
            nummus employs a zero-based budgeting technique.
            Every single dollar is assigned to a category for spending.
            The goal is to know what the role is for every cent in your accounts.
        </p>
        <p>
            Don't have enough funds for a purchase?
            Then move funds from a category that has some to spare.
            Have extra income?
            Allocate to a savings category or fun money!
        </p>
        <p>
            Targets are ways to keep you on track on regular spending and savings.
            Go grocery shopping once a week?
            Set a weekly target to set aside some for that errand.
            Do you have rent or a mortgage?
            Set a monthly target for that!
            Always forget to save for car insurance every 6 months?
            Set a recurring target to save a bit each month so you are never surprised again.
        </p>
    </div>
</details>
<div class="lg:grid grid-cols-[1fr_275px] gap-2 grid-flow-row-dense">
    <div>
        {% for group in ctx.groups %}
            <div id="group-{{ group.uri or 'ungrouped' }}"
                 class="budget-group {{ 'open' if group.is_open }}">{% include "budgeting/group.jinja" %}</div>
        {% endfor %}
    </div>
    <div id="budgeting-sidebar" class="max-lg:hidden">{% include "budgeting/sidebar.jinja" %}</div>
</div>
