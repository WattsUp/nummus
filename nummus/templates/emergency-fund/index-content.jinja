<section class="flex flex-col bg-white max-w-screen-lg m-auto p-2 h-full"
         hx-get="{{ url_for('emergency_fund.page') }}"
         hx-trigger="update-account from:body"
         hx-target="#main"
         hx-swap="innerHTML">
    <h1 class="text-3xl align-left w-full font-serif text-green-600">Emergency Fund</h1>
    <div class="w-full flex justify-around text-lg">
        <div class="text-center">
            <h1 class="text-lg font-bold">Emergency fund savings</h1>
            <h1 class="text-2xl font-bold text-blue">{{ e_fund["current"] | money0 }}</h1>
        </div>
        <div class="text-center">
            <h1 class="text-lg font-bold">Recommended emergency fund</h1>
            <h1 class="text-2xl font-bold text-green-600">
                {{ e_fund["target_lower"] | money0 }} - {{ e_fund["target_upper"] | money0 }}
            </h1>
        </div>
    </div>
    <div class="w-full h-96">
        <canvas id="e-fund-chart-canvas"></canvas>
    </div>
    {% include "emergency-fund/chart-data.jinja" %}
    <div>
        {% if e_fund["delta_lower"] > 0 %}
            <p>
                You have {{ e_fund["current"] | money0 }} in your emergency fund.
                You need {{ e_fund["target_lower"] | money0 }} for emergencies to cover 3 months of budgeted expenses.
                Consider increasing your emergency fund by {{ e_fund["delta_lower"] | money0 }}.
            </p>
        {% elif e_fund["delta_upper"] > 0 %}
            <p>
                You have {{ e_fund["current"] | money0 }} in your emergency fund
                which will cover {{ "%0.1f" % e_fund["months"]   }} months of budgeted expenses.
                You only need {{ e_fund["target_upper"] | money0 }} to cover 6 months of budgeted expenses.
                Unless you have a planned spending goal this year, the extra {{ e_fund["delta_upper"] | money0 }} could be invested.
            </p>
        {% else %}
            <p>
                You have {{ e_fund["current"] | money0 }} in your emergency fund
                which will cover {{ "%0.1f" % e_fund["months"] }} months of budgeted expenses.
                You are in good shape to cover the recommended 3 - 6 months of budgeted expenses.
            </p>
        {% endif %}
    </div>
    {# TODO (WattsUp): List essential categories and average 91d and 183d spending #}
</section>
