<div class="absolute inset-0 bg-grey-500 opacity-50 z-[-1] cursor-pointer"
     hx-get="{{ url_for("common.empty") }}"
     hx-swap="innerHTML"></div>
<div class="w-[900px] h-[580px] max-h-[90vh] bg-white opacity-100 m-auto flex flex-col pt-2"
     hx-include="#form-txn">
    <button hx-get="{{ url_for("common.empty") }}"
            class="ml-auto px-6"
            hx-swap="innerHTML"
            hx-include="this">
        {% with class="w-[32px] h-[32px]" %}
            {% include "svg/x.svg" %}
        {% endwith %}
    </button>
    <h1 class="font-serif text-4xl px-6 text-green-600">Edit transaction</h1>
    <datalist id="payees">
        {% for item in payees %}<option value="{{ item }}">{{ item }}</option>{% endfor %}
    </datalist>
    <datalist id="tags">
        {% for item in tags %}<option value="{{ item }}">{{ item }}</option>{% endfor %}
    </datalist>
    <form class="flex flex-col w-full px-6 grow" id="form-txn">
        <table class="w-full">
            <tbody>
                <tr>
                    <td>Date</td>
                    <td>
                        <input class="w-full" name="date" type="date" value="{{ parent["date"] }}">
                    </td>
                    <td class="w-8"></td>
                    <td>Total Amount</td>
                    <td>{{ parent["amount"] | money }}</td>
                </tr>
                <tr>
                    <td>Account Name</td>
                    <td>{{ parent["account"] }}</td>
                    <td class="w-8"></td>
                    <td>Transaction Locked</td>
                    <td>
                        <label class="checkbox">
                            <input type="checkbox"
                                   name="locked"
                                   {% if parent["locked"] %}checked{% endif %}>
                            {% with class = "w-6 h-6" %}
                                {% include "svg/lock.svg" %}
                            {% endwith %}
                        </label>
                    </td>
                </tr>
                <tr>
                    <td>Statement Text</td>
                    <td colspan="4">{{ parent["statement"] }}</td>
                </tr>
            </tbody>
        </table>
        <hr class="w-full border-grey-200">
        {% include "transactions/edit-splits.jinja" %}
        <div class="w-full flex justify-between mt-1">
            <h1 class="font-bold">Amount yet to be assigned</h1>
            {% include "transactions/edit-remaining.jinja" %}
        </div>
    </form>
    <div id="overlay-error"
         class="w-full bg-red px-6 py-2 text-xl empty:hidden"></div>
    <div class="w-full h-16 bg-grey-100 flex justify-end items-center px-6 text-xl gap-4">
        <button hx-put="{{ url_for("transactions.split", uri=parent["uri"]) }}"
                hx-target="#txn-splits"
                class="button hover:blue">
            {% with class="w-[24px] h-[24px] inline-block align-text-bottom" %}
                {% include "svg/plus.svg" %}
            {% endwith %}
            Add split
        </button>
        <button hx-get="{{ url_for("transaction_categories.overlay") }}"
                hx-target="#overlay"
                hx-swap="innerHTML"
                class="button hover:blue">Edit categories</button>
        <button hx-get="{{ url_for("common.empty") }}"
                class="button hover:green ml-auto"
                hx-swap="innerHTML"
                hx-include="this">Cancel</button>
        <button hx-post="{{ url_for("transactions.edit", uri=parent["uri"]) }}"
                hx-target="#overlay-error"
                hx-swap="innerHTML"
                class="button bg-green">Save</button>
    </div>
</div>
