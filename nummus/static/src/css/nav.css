@utility nav-section {
    @apply flex items-center;

    &>h1 {
        @apply px-3 border border-transparent w-full;
    }

    &>label {
        @apply block cursor-pointer text-center not-dark:text-grey-900 w-full;

        &>button {
            @apply mx-auto;
        }

        &>div {
            @apply text-sm;
        }
    }
}

@utility nav-rail {
    @apply h-full shrink-0 flex flex-col p-1 overflow-y-auto;
    @apply bg-grey-100 dark:bg-grey-900 not-dark:text-grey-900;

    &>* {
        @apply shrink-0;
    }

    &>a {
        @apply hidden md:flex flex-col justify-end mx-auto h-12;
        @apply cursor-pointer font-title text-xl;
        @apply hover:text-green-900 active:text-green-900 transition-colors;

        @variant dark {
            @apply hover:text-green-200 active:text-green-200;
        }
    }

    &>section {
        @apply nav-section;
        @apply flex-col gap-1 py-1;

        @variant first-of-type {
            @apply my-8;
        }

        @variant last-of-type {
            @apply grow;
        }

    }
}

#nav-rail {
    @apply nav-rail max-md:hidden lg:hidden;
}

#nav-drawer {
    @apply nav-rail w-52 px-2;

    /* Modal nav-drawer */
    @variant max-lg {
        @apply fixed top-0 z-50 rounded-r-3xl;
        @apply transition-transform -translate-x-full duration-300;

        @variant open {
            @apply translate-x-0;

            &+#nav-scrim {
                @apply translate-x-0 opacity-100;
                transition: opacity 0.3s, translate 0s;
            }
        }
    }

    &>a {
        @apply text-5xl;
    }

    &>section>label>button {
        @apply p-3 w-full;
    }
}

#nav-bar {
    @apply w-full shrink-0 pt-2 md:hidden;
    @apply bg-grey-100 dark:bg-grey-900 not-dark:text-grey-900;

    @apply nav-section;

    &>label {
        @apply text-sm not-last:w-1/5 last:w-min;

        &>button {
            @apply btn-size-lg;
        }

        @variant last {
            @apply w-min absolute right-3 bottom-19.5;

            &>button {
                @apply fab-green;
            }

        }
    }
}

#nav-header {
    @apply relative w-full fixed top-0 z-40 md:hidden;
    @apply bg-green-600 dark:bg-green-400 text-white dark:text-green-900;

    &>* {
        @apply cursor-pointer;
        @apply hover:text-green-900 active:text-green-900 transition-colors;

        @variant dark {
            @apply hover:text-green-100 active:text-green-100;
        }
    }

    &>icon {
        @apply absolute text-[36px] p-0.5;
    }

    &>a {
        @apply block w-min px-2;
        @apply font-title text-4xl mx-auto;
    }
}

#nav-scrim {
    @apply absolute inset-0 z-45 lg:hidden;
    @apply -translate-x-full;
    @apply bg-grey-500/50 opacity-0;

    /* delay translate until opacity finishes */
    transition: opacity 0.3s, translate 0s 0.3s;
}
